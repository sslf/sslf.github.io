---
title: 编程器救砖小米mini路由器
date: 2017-11-21
category: 工具
tags: [救砖 , 小米mini路由器]
uuid: e2c32f3b-5991-5806-b5cf-4994bf0caad2
#permalink: /other/repair-xiaomi-router.html
---

这个教程也适用修复sn码。**申明： 刷机有风险，需谨慎。一切后果与本人无关**。

### 变砖原因

刚把路由器买来的时候，就迫不及待的刷成了PandoraBox，用了一段时间之后，想刷回官方的系统，在
刷回实际操作的时候，选错了方法，还是使用了刷PandoraBox的方式。导致路由器通电之后，一直
处于黄灯状态。ssh无法连接路由器。使用usb刷系统，处于红灯状态。我下意识就知道成砖头了。

吐槽一下小米之家，变砖之后我就直接去了小米之家，他们的维修方式只有两种：一种是在保修期内直接
换新的。另一种是保修期外返厂维修（他们是没有线刷设备的，维修不了）。我是过了保修期，又不想返
厂。为什么呢？我敢肯定的是硬件没有坏、有一点硬件的知识、不着急用、想练练手。

### 工具的准备

- 电脑一台
- CH341A编程器和驱动
- 编程器夹子
- 十字和一字螺丝刀
- WinHex软件
- 小米mini路由器编程器固件


编程器和夹子都可以从某宝买来也不贵，但需要注意的是： **夹子的针脚数是8，别买错了**
驱动和编程固件[点击下载](http://qiniu.blog.sslfer.com/%E5%88%B7%E6%9C%BA%E9%A9%B1%E5%8A%A8%E5%92%8C%E5%88%B7%E6%9C%BA%E5%9B%BA%E4%BB%B6.zip)

### 操作步骤

#### 1.拆路由器

一开始拿到路由器的时候，根本不知道从哪里下手，其实是要把他 ![背面的封条](http://qiniu.blog.sslfer.com/b843a3b47d108d19d5904890e5d5d2ca.png) 撕掉（放到一边备用），就会露出螺丝来。
撕下来之后，就到了破开外壳了。用一字螺丝刀把路由器的这两边 ![撬开地方](http://qiniu.blog.sslfer.com/9ce6eba2ae3eb2e9a1fcce44e4ef4102.png) 撬开，再用一点劲就可以掰开了。备用。

#### 2.修改编程固件

这个步骤是修复sn码，如果你不修复的话，无法绑定小米账号，也就无法用手机端管理路由器。不修复，能不能救活路由器我就不知道了，因为没有测试过。

用WinHex打开小米mini编程器固件（**文件-打开-选择小米mini编程器固件**），使用快捷键 **ALT+G**，输入 **00FF0004** 如图（图片来自网络）![修改sn](http://qiniu.blog.sslfer.com/ae940eafc8146b1b68ed967fbee62d65.png) 就到了要我们修改的地方了。上图黄色标注的地方就是要替换的sn，我们自己路由器的sn就在从拆开路由器时，撕下来的标签上写着的。

这里修改sn的时候，并不是可以直接就把黄色标注的地方修改过来，而是需要在左边16进制区域进行修改。需要注意的是：16进制区域两个字母代表右边的一个数字。例如：00代表0，01代表1，以此类推09代表9。好在sn码全是数字，就可以自己使用刚刚的规则直接修改了。

在左边区域移动光标到要修改地方的起始位（移动的时候，右边的光标也会跟着移动，注意，右边移动两次，左边才移动一次。原因刚刚说过了）。把sn码逐个替换，替换完一个数字之后，看看右边显示的是不是我们想要的数字。

替换完成之后，还有一步重要的操作。**选块计算CRC32**，步骤是，标记一个起始位和一个截止未，计算这一段的 **CRC32（32bit）** 值。具体操作为：ALT+G 转到偏移量输入00FF0004，再按ALT+1（选块起始），按ALT+G转到偏移量输入00FF3FFF，再按ALT+2（选块结束），这样就选择好了块。再按CTRL+F2选择计算CRC32（注意类型）。就会得到一个值。记下这个值。 **倒序** 修改这个地方。如图（来自网络） ![填写CRC32值](http://qiniu.blog.sslfer.com/9124b5aa11981c2da89f3db2dec95e52.png) 修改完成之后，保存。这个就是我们等会要刷入路由器的固件了。

#### 3.刷机

这一步有两个难点。1.驱动的安装。2.正确的连接路由器和编程器。

驱动的安装，我就不说了。我是找了很多却动和换了3台电脑才成功了，重点说说连接路由器
正确连接的关键是： **找到路由器闪存、夹子和编程器的第一个脚**。
闪存器第一个脚是这个（来源网络）： ![闪存器第一个脚](http://qiniu.blog.sslfer.com/c4eec85d9264ce180892307c3ed6c574.png)
夹子的第一个如图
![夹子第一个脚](http://qiniu.blog.sslfer.com/91d43d7d460f105b0c8a286054efca06.png)
编程器的第一个脚如图 ![编程器第一个脚](http://qiniu.blog.sslfer.com/2151953c7a30b9c2a1990dc1c5418d4a.png) 注意放入的位置要和图片指示的位置一样。别上下搞反了。

这个三个地方的第一个脚全部连接好了之后，就可以用CH341A编程器软件刷机了。**注意的是，在使用编程器夹子的时候千万不要给路由器通电，切记！**

步骤是：检测-[读取-保存]-擦除-查空-打开（第二步修改保存的固件）-编程-校验。
读取和保存可以不操作，这步是保存刷机前路由器你的程序固件。编程的时候要等一段时间。一般都会校验通过的，通过了就代表着刷机成功了。赶快去下编程器，通电试试吧！

来几张我实际刷机的图片
![实际图片1](http://qiniu.blog.sslfer.com/c95cc33accc889d9cc2baaa2267cd344.png)
![实际图片2](http://qiniu.blog.sslfer.com/79528effff185b777c3505275c4fbe73.png)
![实际图片3](http://qiniu.blog.sslfer.com/404e68d343fbbd9055287dd8e25e07b5.png)

### 总结

正确连接路由器和编程器是关键。驱动安装可能会出现错误，要有道耐心。
